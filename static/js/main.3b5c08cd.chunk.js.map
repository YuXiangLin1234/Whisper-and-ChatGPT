{"version":3,"sources":["functions/Utils.js","components/Loading.js","components/Chat.js","containers/MessageRoomPage.js","containers/AskKeyPage.js","functions/UseScript.js","App.js","reportWebVitals.js","index.js"],"names":["padTo2Digits","num","toString","padStart","formatDate","date","getMonth","getDate","join","getHours","getMinutes","getSeconds","validateApiKey","_x","_validateApiKey","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","apiKey","headers","jsonData","wrap","_context","prev","next","concat","messages","model","axios","post","sent","abrupt","t0","console","log","stop","Loading","_jsxs","className","children","_jsx","Chat","_ref","audio","transcription","translation","chat","_useState","useState","_useState2","_slicedToArray","setTranscriptionTime","_useState3","_useState4","translationTime","setTranslationTime","_useState5","_useState6","chatTime","setChatTime","useEffect","Date","style","margin","controls","src","_Fragment","marginTop","MessageRoomPage","audios","setAudios","transcriptions","setTranscriptions","translations","setTranslations","_useState7","_useState8","chats","setChats","_useState9","_useState10","chatgptModel","urlForChatgpt","sendAudioRequest","_ref2","blob","formData","response","FormData","append","data","text","sendTranslationRequest","_x2","_sendTranslationRequest","_callee3","_context3","choices","message","content","sendChatRequest","_x3","_sendChatRequest","_callee4","i","_context4","length","push","sendRequests","_x4","_x5","_sendRequests","_callee5","audioUrl","audioBlob","_context5","_toConsumableArray","addAudioElement","_ref3","_callee2","_context2","URL","createObjectURL","_x6","map","index","AudioRecorder","onRecordingComplete","disabled","onClick","name","fontSize","AskKeyPage","setApiKey","inputRef","useRef","errorRef","handleKeyDown","event","key","target","value","current","visibility","handleClick","type","onKeyDown","ref","useScript","url","integrity","async","undefined","crossOrigin","script","document","createElement","body","appendChild","removeChild","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","React","StrictMode"],"mappings":"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","file":"static/js/main.3b5c08cd.chunk.js","sourcesContent":["import axios from \"axios\";\n\nfunction padTo2Digits(num) {\n  return num.toString().padStart(2, '0');\n}\n\nfunction formatDate(date) {\n  return (\n    [\n    //   date.getFullYear(),\n      padTo2Digits(date.getMonth() + 1),\n      padTo2Digits(date.getDate()),\n    ].join('/') +\n    ' ' +\n    [\n      padTo2Digits(date.getHours()),\n      padTo2Digits(date.getMinutes()),\n      padTo2Digits(date.getSeconds()),\n    ].join(':')\n  );\n}\n\nasync function validateApiKey(apiKey){\n  const chatgptModel = \"gpt-3.5-turbo\";\n  const urlForChatgpt = \"https://api.openai.com/v1/chat/completions\";\n  try{\n      const headers = {\n          \"content-type\": \"application/json\",\n          \"Authorization\": `Bearer ${apiKey}`\n      };\n      const messages = [\n              {\"role\": \"user\", \"content\": \"Hello!\"}\n          ]\n      const jsonData = {messages: messages, model: chatgptModel}\n      const response = await axios.post(urlForChatgpt, jsonData, { headers:headers })\n      return true;\n  }\n  catch (error) {\n      console.log(error);\n      return false;\n  }\n}\n\nexport {formatDate, validateApiKey};","import '../App.css';\nimport React from \"react\";\n\nconst Loading = () => {\n\treturn (\n\t\t<div className=\"spinner\">\n\t\t\t<div className=\"bounce1\"></div>\n\t\t\t<div className=\"bounce2\"></div>\n\t\t\t<div className=\"bounce3\"></div>\n\t\t</div>\t\t\t\t\t\t\n\t)\n}\n\nexport default Loading;","import '../App.css';\nimport React from \"react\";\nimport { useEffect, useState } from 'react';\n\nimport {formatDate} from '../functions/Utils';\nimport Loading from './Loading';\n\nconst Chat = ({audio, transcription, translation, chat}) => {\n\tconst [transcriptionTime, setTranscriptionTime] = useState(\"\");\n\tconst [translationTime, setTranslationTime] = useState(\"\");\n\tconst [chatTime, setChatTime] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst date = new Date();\n\t\tsetTranscriptionTime(formatDate(date));\n\t}, [transcription]);\n\t\n\tuseEffect(() => {\n\t\tconst date = new Date();\n\t\tsetTranslationTime(formatDate(date));\n\t}, [translation])\n\n\tuseEffect(() => {\n\t\tconst date = new Date();\n\t\tsetChatTime(formatDate(date));\n\t}, [chat])\n\n\treturn (\n\t\t<div style={{margin:\"20px\"}}>\n\t\t\t{/* <div className='msg-inbox'>\n\t\t\t<div className='chats'> */}\n\t\t\t<div className='msg-page'>\n\t\t\t\t<div className=\"sent-chats\">\n\t\t\t\t\t<div className='sent-chats-msg'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t// Set this to be null to avoid situation that return is empty\n\t\t\t\t\t\taudio !== null\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<audio controls=\"True\" src={audio}></audio>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Loading/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\ttranscription !== null\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p>{transcription}</p>\n\t\t\t\t\t\t\t\t{/* <span className=\"chat-time\">{transcriptionTime}</span> */}\n\t\t\t\t\t\t\t\t{translation !== null\n\t\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{marginTop:\"1px\"}}>{translation}</p>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"chat-time\">{translationTime}</span>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</>\t\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<Loading/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\taudio !== null\n\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\t<Loading/>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='sent-chats-img'>\n\t\t\t\t\t\t<img className='chats-img' src=\"old.png\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{/* <div className=\"sent-chats\">\n\t\t\t\t\t{\n\t\t\t\t\ttranslation !== null\n\t\t\t\t\t\t?\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className='sent-chats-msg'>\n\t\t\t\t\t\t\t\t<div className='sent-msg-inbox'>\n\t\t\t\t\t\t\t\t\t<p>{translation}</p>\n\t\t\t\t\t\t\t\t\t<span className=\"chat-time\">{translationTime}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='sent-chats-img'>\n\t\t\t\t\t\t\t\t<img className='chats-img' src=\"chatgpt.png\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t: \n\t\t\t\t\t\t\ttranscription !== null\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<Loading/>\t\t\t\t\t\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t}\n\t\t\t\t</div> */}\n\t\t\t\t<div className=\"received-chats\">\n\t\t\t\t\t{\n\t\t\t\t\tchat !== null\n\t\t\t\t\t\t?\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className='received-chats-img'>\n\t\t\t\t\t\t\t\t<img className='chats-img' src=\"chatgpt.png\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='received-msg'>\n\t\t\t\t\t\t\t\t<div className='received-msg-inbox'>\n\t\t\t\t\t\t\t\t\t<p>{chat}</p>\n\t\t\t\t\t\t\t\t\t<span className=\"chat-time\">{chatTime}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t: \n\t\t\t\t\t\ttranslation !== null\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<Loading/>\t\t\t\t\t\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t{/* </div>\n\t\t\t</div> */}\n\t\t\t</div>\n\t\t</div>\n\t)\n\n}\n\nexport default Chat;","import '../App.css';\nimport React from \"react\";\nimport { AudioRecorder } from 'react-audio-voice-recorder';\nimport axios from \"axios\";\nimport { useEffect, useState, useRef } from \"react\";\n\nimport Chat from '../components/Chat';\n\nconst MessageRoomPage = ({apiKey}) => {\n\n    const [audios, setAudios] = useState([]);\n    const [transcriptions, setTranscriptions] = useState([]);\n    const [translations, setTranslations] = useState([]);\n    const [chats, setChats] = useState([]);\n    const [audioClickAble, setAudioClickAble] = useState(false);\n\n    const whisperModel = \"whisper-1\";\n    const chatgptModel = \"gpt-3.5-turbo\";\n    const urlForWhisper = \"https://api.openai.com/v1/audio/transcriptions\";\n    const urlForChatgpt = \"https://api.openai.com/v1/chat/completions\";\n\n    const sendAudioRequest = async function (blob) {      \n        try{\n            const headers = {\n                \"content-type\":  \"multipart/form-data\",\n                \"Authorization\": `Bearer ${apiKey}`\n            //   \"Authorization\": `Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`\n            };    \n            const formData = new FormData();\n            formData.append(\"file\", blob , \"audio.mp3\")\n            formData.append(\"model\", whisperModel)\n            \n            const response = await axios.post(urlForWhisper, formData, { \"headers\":headers })\n            const transcription = response.data.text;    \n            return transcription\n        }\n        catch (error){\n            console.log(error);\n        }\n    }\n\n    async function sendTranslationRequest (transcription) {\n        try{\n            const headers = {\n                \"content-type\": \"application/json\",\n                \"Authorization\": `Bearer ${apiKey}`\n            };\n            const messages = [\n                    {\"role\": \"system\", \"content\": \"Translate from English to Traditional Chinese\"},\n                    {\"role\": \"user\", \"content\": transcription}\n                ]\n            const jsonData = {messages: messages, model: chatgptModel}\n            const response = await axios.post(urlForChatgpt, jsonData, { headers:headers })\n            \n            const translation = response.data.choices[0].message.content\n            return translation;\n        }\n        catch (error) {\n            console.log(error);\n        }\n    }\n\n    async function sendChatRequest(translation) {\n        try {\n            const headers = {\n                \"content-type\": \"application/json\",\n                \"Authorization\": `Bearer ${apiKey}`\n            };\n            const messages = [\n                    {\"role\": \"system\", \"content\": \"You are a helpful assistant.\"},\n                ]\n\n            console.log(translations)\n            // Multi-turn chats\n            // FIXME: setState() is async, so the translations here are not updated,\n            //        so constraint should be translations.length \n            //        to including the last translation\n            for (let i = 0; i < translations.length; i ++){\n                messages.push({\"role\": \"user\", \"content\": translations[i]});\n                messages.push({\"role\": \"assistant\", \"content\": chats[i]});\n            }\n            messages.push({\"role\": \"user\", \"content\": translation});\n\n            const jsonData = {messages: messages, model: chatgptModel}\n            const response = await axios.post(urlForChatgpt, jsonData, {headers: headers} )\n            const chat = response.data.choices[0].message.content\n            return chat;\n        }\n        catch (error){\n            console.log(error)\n        }\n    }\n\n    async function sendRequests (audioUrl, audioBlob){\n        const transcription = await sendAudioRequest(audioBlob);\n        setTranscriptions([...transcriptions, transcription]);\n\n        const translation = await sendTranslationRequest(transcription);\n        setTranslations([...translations, translation])\n\n        const chat = await sendChatRequest(translation);\n        setChats([...chats, chat])\n    }\n\n    const addAudioElement = async function (audioBlob) {\n        const audioUrl = URL.createObjectURL(audioBlob);\n        setAudios([...audios, audioUrl]);\n\n        // enforce the length of three lists are equal\n        setTranscriptions([...transcriptions, null]);\n        setTranslations([...translations, null]);\n        setChats([...chats, null]);\n\n        await sendRequests(audioUrl, audioBlob);\n    };\n\n    const resetConversation = () => {\n        setAudios([]);\n        setTranscriptions([]);\n        setTranslations([]);\n        setChats([]);\n    }\n\n    return (\n        <div className=\"App\" style={{marginTop:\"30px\"}}>\n            <div className='msg-container'>\n              {\n              audios.map((audio, index)=> (\n                <Chat key={index} audio={audios[index]} transcription={transcriptions[index]} \n                        translation={translations[index]} chat={chats[index]}/>\n              ))\n              }\n            </div>\n            <div className='bottom-line'></div>\n            <div className='bottom-line-button'>\n                <AudioRecorder onRecordingComplete={addAudioElement}/>\n                <button className='circle-button' disabled={false}  onClick={resetConversation}>\n                    <ion-icon name=\"trash\" style={{fontSize: \"17px\"}}></ion-icon>\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default MessageRoomPage;\n","import '../App.css';\nimport React from \"react\";\nimport { useRef } from \"react\";\n\nimport { validateApiKey } from '../functions/Utils';\n\nconst AskKeyPage = ({setApiKey}) => {\n\n    const inputRef = useRef();\n    const errorRef = useRef();\n    const handleKeyDown = async (event) => {\n        if (event.key === \"Enter\"){\n            try{\n                const apiKey = event.target.value;\n                const test = await validateApiKey(apiKey);\n                if (test == true)\n                    setApiKey(event.target.value)\n                else \n                    errorRef.current.style.visibility = \"visible\";\n            }\n            catch (error){\n                errorRef.current.style.visibility = \"visible\";\n                console.log(error)\n            }\n        }\n    }\n    const handleClick = async (event) => {\n        try{\n            const apiKey = inputRef.current.value\n            const test = await validateApiKey(apiKey) \n            if (test === true)\n                setApiKey(inputRef.current.value)\n            else \n                errorRef.current.style.visibility = \"visible\";\n        }\n        catch (error) {\n            errorRef.current.style.visibility = \"visible\";\n            console.log(error)\n        }\n    }\n\n    return (\n        <div className=\"App ask-key-container\" >\n            <h2>Whisper & ChatGPT 術前問診系統</h2>\n            <span>\n                Api Key : <input type=\"text\" onKeyDown={handleKeyDown} ref={inputRef}/>\n            </span>\n            <button onClick={handleClick}>確認</button>\n            <div className=\"error\" ref={errorRef} style={{\"visibility\": \"hidden\"}}>\n                <h3 style={{\"color\":\"red\"}}>Error!</h3>\n                <p style={{\"color\":\"red\"}}>Please ensure that a correct api key is provided</p>\n            </div> \n        </div>\n    );\n}\n\nexport default AskKeyPage;\n","import { useEffect } from \"react\"\n\nconst useScript = (url, integrity, async = true, crossOrigin = \"anonymous\") => {\n  useEffect(() => {\n    const script = document.createElement(\"script\")\n\n    script.src = url\n\n    script.async = async\n\n    if (integrity) {\n      script.integrity = integrity\n    }\n\n    script.crossOrigin = crossOrigin\n\n    document.body.appendChild(script)\n\n    return () => {\n      document.body.removeChild(script)\n    }\n  }, [url, integrity, async, crossOrigin])\n}\n\nexport default useScript","import './App.css';\nimport React from \"react\";\n// import dotenv_defaults from \"dotenv-defaults\";\nimport { useEffect, useState } from \"react\";\n\nimport MessageRoomPage from \"./containers/MessageRoomPage\"\nimport AskKeyPage from './containers/AskKeyPage';\nimport useScript from './functions/UseScript';\n// dotenv_defaults.config();\n\nfunction App() {\n\n    // useScript(\"https://cdn.jsdelivr.net/npm/ionicons/dist/ionicons/ionicons.esm.js\")\n    useScript(\"https://cdn.jsdelivr.net/npm/ionicons/dist/ionicons/ionicons.js\")\n    const [apiKey, setApiKey] = useState(\"\");\n\n    return (\n        <div className=\"App\" style={{marginTop:\"30px\"}}>\n            { apiKey.length\n                ?\n                <MessageRoomPage apiKey= {apiKey}/>\n                :\n                <AskKeyPage setApiKey = {setApiKey}/>\n            }\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}