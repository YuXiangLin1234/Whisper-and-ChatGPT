(this["webpackJsonpWhisper-and-ChatGPT"]=this["webpackJsonpWhisper-and-ChatGPT"]||[]).push([[0],{113:function(e,t,n){},117:function(e,t){},119:function(e,t){},142:function(e,t){},143:function(e,t){},190:function(e,t){},198:function(e,t,n){"use strict";n.r(t);var r=n(4),c=n.n(r),s=n(92),a=n.n(s),o=(n(113),n(8)),i=(n(24),n(6)),u=n(23),l=n(11),p=n(93),j=n(16);function b(e){return e.toString().padStart(2,"0")}function d(e){return[b(e.getMonth()+1),b(e.getDate())].join("/")+" "+[b(e.getHours()),b(e.getMinutes()),b(e.getSeconds())].join(":")}function h(e){e.current.style.cursor="not-allowed",e.current.style.pointerEvents="none",e.current.style.opacity="0.4"}function O(e){e.current.style.cursor="pointer",e.current.style.pointerEvents="auto",e.current.style.opacity="1"}!function(){var e=document.createElement("a");document.body.appendChild(e),e.style="display: none"}();var f=function(){window.scrollTo(0,document.body.scrollHeight)};var x=n(2),m=function(){return Object(x.jsxs)("div",{className:"spinner",children:[Object(x.jsx)("div",{className:"bounce1"}),Object(x.jsx)("div",{className:"bounce2"}),Object(x.jsx)("div",{className:"bounce3"})]})},g=function(e){var t=e.audio,n=e.transcription,c=e.translation,s=e.chat,a=Object(r.useState)(""),i=Object(o.a)(a,2),u=(i[0],i[1]),l=Object(r.useState)(""),p=Object(o.a)(l,2),j=p[0],b=p[1],h=Object(r.useState)(""),O=Object(o.a)(h,2),f=O[0],g=O[1];return Object(r.useEffect)((function(){var e=new Date;u(d(e))}),[n]),Object(r.useEffect)((function(){var e=new Date;b(d(e))}),[c]),Object(r.useEffect)((function(){var e=new Date;g(d(e))}),[s]),Object(x.jsx)("div",{style:{margin:"20px"},children:Object(x.jsxs)("div",{className:"msg-page",children:[Object(x.jsxs)("div",{className:"sent-chats",children:[Object(x.jsxs)("div",{className:"sent-chats-msg",children:[null!==t?Object(x.jsx)("audio",{controls:"True",src:t}):Object(x.jsx)(m,{}),null!==n?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:n}),null!==c?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{style:{marginTop:"1px"},children:c}),Object(x.jsx)("span",{className:"chat-time",children:j})]}):Object(x.jsx)(m,{})]}):null!==t?Object(x.jsx)(m,{}):Object(x.jsx)(x.Fragment,{})]}),Object(x.jsx)("div",{className:"sent-chats-img",children:Object(x.jsx)("img",{className:"chats-img",src:"old.png"})})]}),Object(x.jsx)("div",{className:"received-chats",children:null!==s?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"received-chats-img",children:Object(x.jsx)("img",{className:"chats-img",src:"chatgpt.png"})}),Object(x.jsx)("div",{className:"received-msg",children:Object(x.jsxs)("div",{className:"received-msg-inbox",children:[Object(x.jsx)("p",{children:s}),Object(x.jsx)("span",{className:"chat-time",children:f})]})})]}):null!==c?Object(x.jsx)(m,{}):Object(x.jsx)(x.Fragment,{})})]})})},y=function(e){var t=e.clinic;return Object(x.jsx)("div",{style:{margin:"20px"},children:Object(x.jsx)("div",{className:"msg-page",children:Object(x.jsx)("div",{className:"clinic-chats",children:t.length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"clinic-chats-image",children:Object(x.jsx)("img",{className:"clinic-img",src:"chatgpt.png"})}),Object(x.jsx)("div",{className:"clinic-msg",children:Object(x.jsx)("div",{className:"received-msg-inbox",children:Object(x.jsx)("p",{children:t})})})]}):Object(x.jsxs)("div",{className:"center",children:[Object(x.jsx)("h2",{children:"Wait for clinic scheduling"}),Object(x.jsx)(m,{})]})})})})};j.b.register({family:"NotoSansTC-Regular",src:"SourceHanSansTC-VF.ttf"});var v=j.f.create({page:{padding:40,fontSize:12,fontFamily:"NotoSansTC-Regular",display:"block"},title:{color:"blue",fontWeight:"bold",paddingBottom:3,marginBottom:20,fontSize:24,textAlign:"center",letterSpacing:"2px"},text:{fontSize:15,letterSpacing:"1px",lineHeight:"1.5px"}}),w=function(e){e.translations,e.chats;var t=e.summary;return Object(x.jsx)(j.a,{children:Object(x.jsx)(j.e,{size:"A4",style:v.page,children:Object(x.jsxs)(j.h,{style:{flexDirection:"column",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(x.jsx)(j.h,{style:v.title,children:Object(x.jsx)(j.g,{children:" ChatGPT \u554f\u8a3a\u7d00\u9304 "})}),Object(x.jsx)(j.h,{style:v.text,children:Object(x.jsx)(j.g,{children:function(e){var t="",n=e.split("\n");console.log(n);for(var r=0;r<n.length;r++)for(var c,s=null!==(c=n[r].match(/.{1,30}/g))&&void 0!==c?c:[],a=0;a<s.length;a++)t+=s[a]+"\n";return t}(t)})})]})})})},k=n(200),N=n(70),S=["\u79d1\u5225\uff1a\u5a66\u7522\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u5a66\u5973\u75be\u75c5 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u65e5\u4e0a\u5348 7:30~9:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u6234\u67d4","\u79d1\u5225\uff1a\u9aa8\u79d1\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u9aa8\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u56db\u4e0a\u5348 5:00~7:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u738b\u68e3","\u79d1\u5225\uff1a\u5c0f\u5152\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u5c0f\u5152\u75c5 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u65e5\u4e0a\u5348 6:30~8:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u6797\u660e","\u79d1\u5225\uff1a\u9aa8\u79d1\u90e8 \u5c08\u9577\uff1a\u9aa8\u5916\u50b7\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u65e5\u4e0a\u5348 6:30~8:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u5f35\u8a13","\u79d1\u5225\uff1a\u5167\u79d1\u90e8 \u5c08\u9577\uff1a\u9ad8\u8840\u8102\u3001\u8166\u8840\u7ba1\u75be\u75c5 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e8c\u65e9\u4e0a 10:45~11:30  \u770b\u8a3a\u91ab\u5e2b\uff1a\u5289\u5f6c","\u79d1\u5225\uff1a\u5167\u79d1\u90e8 \u5c08\u9577\uff1a\u8178\u80c3\u624b\u8853\u3001\u6d88\u5316\u7cfb\u7d71\u3001\u8179\u7009 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e94\u65e9\u4e0a 8:00~9:30  \u770b\u8a3a\u91ab\u5e2b\uff1a\u674e\u5bb6","\u79d1\u5225\uff1a\u5167\u79d1\u90e8 \u5c08\u9577\uff1a\u814e\u81df\u3001\u611f\u67d3\u75c7\u3001 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e09\u4e0b\u5348 15:30~16:50  \u770b\u8a3a\u91ab\u5e2b\uff1a\u5468\u76e3","\u79d1\u5225\uff1a\u5167\u79d1\u90e8 \u5c08\u9577\uff1a\u547c\u5438\u7cfb\u7d71\u3001\u6c23\u5598\u3001\u904e\u654f \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u516d\u4e0b\u534813:00~14:30  \u770b\u8a3a\u91ab\u5e2b\uff1a\u90ed\u6210","\u79d1\u5225\uff1a\u773c\u79d1 \u5c08\u9577\uff1a\u4e00\u822c\u773c\u79d1\u3001\u89d2\u819c\u3001\u767d\u5167\u969c \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e8c\u4e0b\u534814:30~15:50  \u770b\u8a3a\u91ab\u5e2b\uff1a\u80e1\u84c9","\u79d1\u5225\uff1a\u5916\u79d1\u90e8 \u5c08\u9577\uff1a\u795e\u7d93\u5916\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e00\u4e0a\u53489:30~10:30 \u770b\u8a3a\u91ab\u5e2b\uff1a\u8cf4\u660e","\u79d1\u5225\uff1a\u5916\u79d1\u90e8 \u5c08\u9577\uff1a\u80f8\u8154\u5916\u79d1\u3001\u809d\u81bd\u5916\u79d1\u3001\u80c3\u8178\u5916\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e94\u4e0a\u53489:00~10:30  \u770b\u8a3a\u91ab\u5e2b\uff1a\u674e\u9298","\u79d1\u5225\uff1a\u5916\u79d1\u90e8 \u5c08\u9577\uff1a\u6574\u578b\u5916\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e09\u4e0b\u534817:00~18:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u8b1d\u7965","\u79d1\u5225\uff1a\u5916\u79d1\u90e8 \u5c08\u9577\uff1a\u624b\u5916\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u56db\u665a\u4e0a19:30~20:30  \u770b\u8a3a\u91ab\u5e2b\uff1a\u8b1d\u8ce2","\u79d1\u5225\uff1a\u5916\u79d1\u90e8 \u5c08\u9577\uff1a\u71d9\u50b7\u5916\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e8c\u4e0a\u53488:30~9:30  \u770b\u8a3a\u91ab\u5e2b\uff1a\u694a\u6c38\u5065","\u79d1\u5225\uff1a\u5916\u79d1\u90e8 \u5c08\u9577\uff1a\u5fc3\u81df\u5916\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e09\u4e0b\u534813:30~15:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u9673\u7965","\u79d1\u5225\uff1a\u5916\u79d1\u90e8 \u5c08\u9577\uff1a\u4e73\u623f\u5916\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u56db\u665a\u4e0a19:00~20:00 \u770b\u8a3a\u91ab\u5e2b\uff1a\u9ec3\u5347","\u79d1\u5225\uff1a\u74b0\u5883\u66a8\u8077\u696d\u91ab\u5b78\u90e8 \u5c08\u9577\uff1a\u8077\u696d\u6027\u58d3\u529b\u3001\u904e\u52de\u3001\u7cbe\u795e\u75be\u60a3 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e94\u65e9\u4e0a10:00~12:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u675c\u79ae","\u79d1\u5225\uff1a\u8001\u5e74\u91ab\u5b78\u90e8 \u5c08\u9577\uff1a\u8001\u5e74\u5e38\u898b\u75be\u75c5 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e09\u4e0b\u534815:30~16:30  \u770b\u8a3a\u91ab\u5e2b\uff1a\u9673\u8c6a","\u79d1\u5225\uff1a\u7cbe\u795e\u91ab\u5b78\u90e8 \u5c08\u9577\uff1a\u5931\u667a\u75c7\u3001\u6182\u9b31\u75c7\u3001\u7126\u616e\u3001\u5e7b\u807d\u3001\u8a8d\u77e5\u969c\u7919 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e94\u4e0a\u53489:00~10:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u9ec3\u6b63","\u79d1\u5225\uff1a\u5fa9\u5065\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u5fa9\u5065 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e94\u665a\u4e0a20:00~21:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u738b\u8cb4","\u79d1\u5225\uff1a\u76ae\u819a\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u76ae\u819a\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e00\u665a\u4e0a19:30~20:30  \u770b\u8a3a\u91ab\u5e2b\uff1a\u9673\u83c1","\u79d1\u5225\uff1a\u7259\u79d1\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u7259\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e09\u65e9\u4e0a9:00~11:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u9673\u6167","\u79d1\u5225\uff1a\u6ccc\u5c3f\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u6ccc\u5c3f\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u56db\u665a\u4e0a18:00~19:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u5289\u5f6c","\u79d1\u5225\uff1a\u8033\u9f3b\u5589\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u8033\u9f3b\u5589\u79d1 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e94\u665a\u4e0a17:00~19:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u6797\u5cf0","\u79d1\u5225\uff1a\u816b\u7624\u91ab\u5b78\u90e8 \u5c08\u9577\uff1a\u4e00\u822c\u816b\u7624 \u9580\u8a3a\u6642\u9593\uff1a\u661f\u671f\u4e8c\u65e9\u4e0a7:30~9:00  \u770b\u8a3a\u91ab\u5e2b\uff1a\u76e7\u4f38"],T="gpt-3.5-turbo",C="https://api.openai.com/v1/chat/completions",A="temp_51410de77c21fa5c219c4260fb4628dc",B="".concat("https://4e48-114-36-131-122.ngrok-free.app/","https://z6jdmt46g8ep02t7.us-east-1.aws.endpoints.huggingface.cloud");function R(e){return z.apply(this,arguments)}function z(){return(z=Object(l.a)(Object(i.a)().mark((function e(t){var n,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={"content-type":"application/json",Authorization:"Bearer ".concat(t)},r={messages:[{role:"user",content:"Hello!"}],model:T},e.next=6,k.a.post(C,r,{headers:n});case 6:return e.sent,e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function E(e){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(Object(i.a)().mark((function e(t){var n,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(N.createSilentAudio)(5,44100),r=new Blob([n],{type:"audio/webm;codecs=opus"}),c={Authorization:"Bearer ".concat(t),"Content-Type":"audio/webm;codecs=opus","x-cors-api-key":A},e.next=6,k.a.post(B,r,{headers:c});case 6:return e.sent,e.abrupt("return",!0);case 10:if(e.prev=10,e.t0=e.catch(0),console.log(e.t0.response.data.error),"Authorization header is correct, but the token seems invalid"!==e.t0.response.data.error){e.next=17;break}return e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function H(e){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(Object(i.a)().mark((function e(t){var n,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(N.createSilentAudio)(5,44100),r=new Blob([n],{type:"audio/webm;codecs=opus"}),c={Authorization:"Bearer ".concat(t),"Content-Type":"audio/webm;codecs=opus","x-cors-api-key":A},e.next=6,k.a.post(B,r,{headers:c});case 6:return s=e.sent,console.log(s.status),e.abrupt("return",!0);case 11:if(e.prev=11,e.t0=e.catch(0),console.log(e.t0),console.log(e.t0.response.status),503!==e.t0.response.status){e.next=19;break}return e.abrupt("return",!1);case 19:return e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var K=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t,n){var r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={authorization:"Bearer ".concat(n),"content-type":"audio/webm;codecs=opus",accept:"application/json"},e.next=4,k.a.post(B,t,{headers:r});case 4:return c=e.sent,s=c.data.text,e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();function D(e,t){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(Object(i.a)().mark((function e(t,n){var r,c,s,a,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={"content-type":"application/json",Authorization:"Bearer ".concat(n)},c={messages:[{role:"system",content:"Rewrite the sentence into a fluent Traditional Chinese one"},{role:"user",content:t}],model:T},e.prev=3,e.next=6,k.a.post(C,c,{headers:r});case 6:return s=e.sent,a=s.data.choices[0].message.content,e.abrupt("return",a);case 11:if(e.prev=11,e.t0=e.catch(3),console.log(e.t0),429!==e.t0.response.status){e.next=22;break}return e.next=17,k.a.post(C,c,{headers:r});case 17:return o=e.sent,u=o.data.choices[0].message.content,e.abrupt("return",u);case 22:return e.abrupt("return","");case 23:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function G(e,t,n,r){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(Object(i.a)().mark((function e(t,n,r,c){var s,a,o,u,l,p,j,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s={"content-type":"application/json",Authorization:"Bearer ".concat(c)},a=[{role:"system",content:"\u4f60\u662f\u4e00\u500b\u8a3a\u524d\u554f\u8a3a\u7cfb\u7d71\uff0c\u75c5\u4eba\u6703\u8ddf\u4f60\u8aaa\u4ed6\u76ee\u524d\u7684\u8eab\u9ad4\u72c0\u6cc1\uff0c                                            \u75c5\u4eba\u901a\u5e38\u6703\u8ddf\u4f60\u8b1b\u4ee5\u4e0b\u5e7e\u4ef6\u4e8b\u60c5:\n\n\u767c\u75c5\uff1a\u4ec0\u9ebc\u6642\u5019\u958b\u59cb                                            \u6ce8\u610f\u5230\u6709\u75c7\u72c0\u7522\u751f\uff1f\u8a98\u767c\u539f\u56e0\uff1a\u75c7\u72c0\u958b\u59cb\u51fa\u73fe\u7684\u6642\u9593\u9ede\u9644\u8fd1\uff0c                                            \u75c5\u4eba\u5728\u4ec0\u9ebc\u74b0\u5883\u505a\u4e86\u54ea\u4e9b\u4e8b\u60c5\uff1f\u6027\u8cea\uff1a\u75c7\u72c0\u51fa\u73fe\u6642\u7684\u611f\u89ba\u3001                                            \u75c7\u72c0\u7684\u7279\u5fb5\u75c7\u72c0\u6563\u5e03\uff1a\u51fa\u73fe\u75c7\u72c0\u7684\u90e8\u4f4d\u662f\u5426\u6539\u8b8a\u3001\u6216\u8005\u96a8\u8457                                            \u8eab\u9ad4\u7684\u79fb\u52d5\u800c\u6709\u8b8a\u5316\uff1f\u56b4\u91cd\u7a0b\u5ea6\uff1a\u75c7\u72c0\u4f55\u6642\u6700\u56b4\u91cd\uff1f\u6709\u591a\u56b4\u91cd\uff1f                                            \n\n\u8acb\u4f60\u5229\u7528\u7372\u5f97\u7684\u8a0a\u606f\uff0c\u4f86\u5efa\u7acb\u770b\u8a3a\u76ee\u6a19\uff0c\u53ef\u4ee5\u5f9e\u63d0\u51fa\u958b\u653e\u5f0f                                            \u7684\u554f\u984c\u958b\u59cb\uff0c\u5982\u679c\u4e0a\u8ff0\u95dc\u65bc\u767c\u75c5\u3001\u8a98\u767c\u539f\u56e0\u3001\u6027\u8cea\u3001\u75c7\u72c0\u6563\u5e03\u3001                                            \u56b4\u91cd\u7a0b\u5ea6\u6709\u4e0d\u6e05\u695a\u7684\u5730\u65b9\uff0c\u4e5f\u53ef\u4ee5\u8acb\u75c5\u4eba\u56de\u7b54\uff0c\u7136\u5f8c\u89c0\u5bdf\u75c5\u4eba\u7684                                            \u56de\u8986\uff0c\u4e26\u7528\u7e41\u9ad4\u4e2d\u6587\u7d66\u51fa\u5efa\u8b70\u3002"}],console.log(n),o=0;o<n.length;o++)a.push({role:"user",content:n[o]}),a.push({role:"assistant",content:r[o]});return a.push({role:"user",content:t}),console.log(a),u={messages:a,model:T},e.prev=7,e.next=10,k.a.post(C,u,{headers:s});case 10:return l=e.sent,p=l.data.choices[0].message.content,e.abrupt("return",p);case 15:if(e.prev=15,e.t0=e.catch(7),console.log(e.t0),429!==e.t0.response.status){e.next=26;break}return e.next=21,k.a.post(C,u,{headers:s});case 21:return j=e.sent,b=j.data.choices[0].message.content,e.abrupt("return",b);case 26:return e.abrupt("return","");case 27:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}function L(e,t){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(Object(i.a)().mark((function e(t,n){var r,c,s,a,o,u,l,p;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r={"content-type":"application/json",Authorization:"Bearer ".concat(n)},(c=[{role:"system",content:"\u4f60\u662f\u4e00\u500b\u91cd\u9ede\u6574\u7406\u7cfb\u7d71\uff0c\u75c5\u4eba\u6703\u8ddf\u4f60\u8aaa\u4ed6\u76ee\u524d\u7684\u8eab\u9ad4\u72c0\u6cc1\uff0c                                                \u901a\u5e38\u6703\u5305\u542b\u4ee5\u4e0b 4 \u500b\u9762\u5411:\n\n\u767c\u75c5\u6642\u9593\u3001\u75c7\u72c0\u7684\u8a98\u767c\u539f\u56e0\u3001                                                \u75c7\u72c0\u7684\u6027\u8cea\u3001\u56b4\u91cd\u7a0b\u5ea6 \u3002\u8acb\u4f60\u5229\u7528\u7372\u5f97\u7684\u8a0a\u606f\uff0c\u91dd\u5c0d\u9019\u4e9b\u9762\u5411                                                 \u9032\u884c\u91cd\u9ede\u6574\u7406\uff0c\u6700\u5f8c\u7528\u7e41\u9ad4\u4e2d\u6587\u7d66\u51fa\u7e3d\u7d50\uff08\u4f60\u4e0d\u9700\u8981\u7d66\u51fa\u5efa\u8b70\uff0c                                                \u53ea\u9700\u8981\u5ba2\u89c0\u7684\u7d71\u6574\u91cd\u9ede\u5373\u53ef\uff09\u3002"}]).push({role:"user",content:"\u75c5\u4eba\u7684\u63cf\u8ff0\uff1a"}),s=0;s<t.length;s++)c.push({role:"user",content:t[s]});return console.log(c),a={messages:c,model:T},e.prev=6,e.next=9,k.a.post(C,a,{headers:r});case 9:return o=e.sent,u=o.data.choices[0].message.content,e.abrupt("return",u);case 14:if(e.prev=14,e.t0=e.catch(6),console.log(e.t0),429!==e.t0.response.status){e.next=25;break}return e.next=20,k.a.post(C,a,{headers:r});case 20:return l=e.sent,p=l.data.choices[0].message.content,e.abrupt("return",p);case 25:return e.abrupt("return","");case 26:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}function J(e,t){return U.apply(this,arguments)}function U(){return(U=Object(l.a)(Object(i.a)().mark((function e(t,n){var r,c,s,a,o,u,l,p;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r={"content-type":"application/json",Authorization:"Bearer ".concat(n)},(c=[{role:"system",content:"\u6839\u64da\u75c5\u4eba\u7684\u63cf\u8ff0\u53ca\u9580\u8a3a\u6642\u9593\u8868\uff0c\u627e\u51fa\u9580\u8a3a\u6642\u9593\u8868\u4e2d                                         \u300c\u5c08\u9577\u300d\u4e00\u9805\u7b26\u5408\u75c5\u4eba\u75c7\u72c0\u7684\u91ab\u751f\uff0c\u4e26\u544a\u77e5\u9019\u4e9b\u91ab\u751f\u5c0d\u61c9\u7684                                         \u8a3a\u5225\u53ca\u9580\u8a3a\u6642\u9593\u3002\u8acb\u4ee5\u7e41\u9ad4\u4e2d\u6587\u56de\u7b54\u3002"}]).push({role:"user",content:"\u75c5\u4eba\u7684\u75c7\u72c0\uff1a"}),c.push({role:"user",content:t}),c.push({role:"user",content:"\u9580\u8a3a\u6642\u9593\u8868\uff1a"}),s=0;s<S.length;s++)c.push({role:"user",content:S[s]});return console.log(c),a={messages:c,model:T},e.prev=8,e.next=11,k.a.post(C,a,{headers:r});case 11:return o=e.sent,u=o.data.choices[0].message.content,e.abrupt("return",u);case 16:if(e.prev=16,e.t0=e.catch(8),console.log(e.t0),429!==e.t0.response.status){e.next=27;break}return e.next=22,k.a.post(C,a,{headers:r});case 22:return l=e.sent,p=l.data.choices[0].message.content,e.abrupt("return",p);case 27:return e.abrupt("return","");case 28:case"end":return e.stop()}}),e,null,[[8,16]])})))).apply(this,arguments)}var V=function(e){var t=e.apiKey,n=e.hfToken,c=e.setApiKey,s=e.setHfToken,a=Object(r.useState)(!1),b=Object(o.a)(a,2),d=b[0],v=b[1],k=Object(r.useState)([]),N=Object(o.a)(k,2),S=N[0],T=N[1],C=Object(r.useState)([]),A=Object(o.a)(C,2),B=A[0],R=A[1],z=Object(r.useState)([]),E=Object(o.a)(z,2),F=E[0],P=E[1],W=Object(r.useState)([]),I=Object(o.a)(W,2),M=I[0],U=I[1],V=Object(r.useState)(""),_=Object(o.a)(V,2),q=_[0],Q=_[1],X=Object(r.useState)(""),Y=Object(o.a)(X,2),Z=Y[0],$=Y[1],ee=Object(r.useRef)(),te=Object(r.useRef)(),ne=Object(r.useRef)(),re=Object(r.useRef)(),ce=Object(r.useRef)();function se(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(l.a)(Object(i.a)().mark((function e(r,c){var s,a,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(c,n);case 2:return s=e.sent,R([].concat(Object(u.a)(B),[s])),e.next=6,D(s,t);case 6:return a=e.sent,P([].concat(Object(u.a)(F),[a])),e.next=10,G(a,F,M,t);case 10:o=e.sent,U([].concat(Object(u.a)(M),[o]));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee.current.style.display="none",h(re),h(ce),n=URL.createObjectURL(t),T([].concat(Object(u.a)(S),[n])),R([].concat(Object(u.a)(B),[null])),P([].concat(Object(u.a)(F),[null])),U([].concat(Object(u.a)(M),[null])),e.next=10,se(n,t);case 10:ee.current.style.display="inline",O(re),O(ce),setTimeout(f,1e3);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var n,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne.current.style.display="none",ee.current.style.display="none",te.current.style.display="inline",e.next=5,L(F,t);case 5:return n=e.sent,te.current.style.display="none",Q(n),console.log(n),e.next=11,J(n,t);case 11:r=e.sent,$(r),console.log(r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){T([]),R([]),P([]),U([]),Q([])};return Object(r.useEffect)((function(){var e=function(){var t=Object(l.a)(Object(i.a)().mark((function t(){var r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(n);case 2:return r=t.sent,console.log(r),!0===r?v(!0):setTimeout(e,8e3),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e(),v(!0)}),[]),Object(x.jsx)("div",{className:"App",style:{marginTop:"30px"},children:0===q.length?d?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"msg-container",children:[S.map((function(e,t){return Object(x.jsx)(g,{audio:S[t],transcription:B[t],translation:F[t],chat:M[t]},t)})),Object(x.jsx)("button",{className:"button-ellipse",ref:ee,onClick:ie,style:{display:"none",marginBottom:"40px",marginTop:"40px"},children:"\u751f\u6210\u554f\u8a3a\u5831\u544a"}),Object(x.jsxs)("div",{className:"center",ref:te,style:{display:"none",paddingBottom:"60px"},children:[Object(x.jsx)("h2",{children:"Wait for report generation"}),Object(x.jsx)(m,{})]})]}),Object(x.jsxs)("div",{ref:ne,children:[Object(x.jsx)("div",{className:"bottom-line"}),Object(x.jsxs)("div",{className:"bottom-line-button",children:[Object(x.jsx)("div",{ref:re,children:Object(x.jsx)(p.a,{onRecordingComplete:oe})}),Object(x.jsx)("button",{className:"circle-button",ref:ce,onClick:function(){ee.current.style.display="none",ue()},children:Object(x.jsx)("ion-icon",{name:"trash",style:{fontSize:"17px"}})})]})]})]}):Object(x.jsxs)("div",{className:"center",children:[Object(x.jsx)("h2",{children:"Wait for model loading"}),Object(x.jsx)(m,{})]}):Object(x.jsxs)("div",{className:"msg-page",children:[Object(x.jsx)("h2",{children:"\u554f\u8a3a\u7d00\u9304"}),Object(x.jsx)(j.d,{style:{width:"70%",height:"300px"},fileName:"ChatGPT \u554f\u8a3a\u7d00\u9304.pdf",children:Object(x.jsx)(w,{translations:F,chats:M,summary:q})}),Object(x.jsx)("div",{className:"msg-container",style:{margin:"auto",height:"200px"},children:Object(x.jsx)(y,{clinic:Z})}),Object(x.jsxs)("div",{style:{marginBottom:"60px"},children:[Object(x.jsx)("button",{className:"button-ellipse",onClick:function(){Q(""),$("")},children:"\u7e7c\u7e8c\u554f\u8a3a"}),Object(x.jsx)(j.c,{document:Object(x.jsx)(w,{translations:F,chats:M,summary:q}),fileName:"ChatGPT \u554f\u8a3a\u7d00\u9304.pdf",children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"":Object(x.jsx)("button",{className:"button-ellipse button-margin-1",children:"\u4e0b\u8f09\u554f\u8a3a\u7d00\u9304"})}}),Object(x.jsx)("button",{className:"button-ellipse button-margin-2",onClick:function(){ue(),s(""),c("")},children:"\u7d50\u675f\u554f\u8a3a"})]})]})})},_=function(e){var t=e.setApiKey,n=e.setHfToken,c=Object(r.useRef)(),s=Object(r.useRef)(),a=Object(r.useRef)(),o=Object(r.useRef)(),u=Object(r.useRef)(),p=function(){var e=Object(l.a)(Object(i.a)().mark((function e(){var r,l,p,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=s.current.value,l=c.current.value,0!==r.length&&0!==l.length){e.next=10;break}return a.current.style.display="inline",o.current.style.display="none",u.current.style.display="none",e.abrupt("return");case 10:a.current.style.display="none";case 11:return e.next=13,R(r);case 13:return p=e.sent,e.next=16,E(l);case 16:j=e.sent,!0===p&&!0===j?(t(r),n(l),o.current.style.display="none",u.current.style.display="none"):(o.current.style.display=!1===p?"inline":"none",u.current.style.display=!1===j?"inline":"none"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===t.key&&p();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"App ask-key-container",children:[Object(x.jsx)("h2",{children:"\u8a3a\u524d\u554f\u8a3a\u7cfb\u7d71"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"ask-key-component",children:[Object(x.jsxs)("span",{children:["OpenAI Api Key : \xa0 \u2003\xa0",Object(x.jsx)("input",{type:"text",onKeyDown:j,ref:s})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:["Huggingface Token : \xa0",Object(x.jsx)("input",{type:"text",onKeyDown:j,ref:c})]})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{onClick:b,children:"\u78ba\u8a8d"}),Object(x.jsxs)("div",{className:"error",ref:a,style:{display:"none"},children:[Object(x.jsx)("h3",{style:{color:"red"},children:"Error!"}),Object(x.jsx)("p",{style:{color:"red"},children:"Please ensure that both two input box are filled"})]}),Object(x.jsxs)("div",{className:"error",ref:o,style:{display:"none"},children:[Object(x.jsx)("h3",{style:{color:"red"},children:"Error!"}),Object(x.jsx)("p",{style:{color:"red"},children:"Please ensure that a correct OpenAI apikey is provided"})]}),Object(x.jsxs)("div",{className:"error",ref:u,style:{display:"none"},children:[Object(x.jsx)("h3",{style:{color:"red"},children:"Error!"}),Object(x.jsx)("p",{style:{color:"red"},children:"Please ensure that a correct huggingface token is provided"})]})]})},q=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous";Object(r.useEffect)((function(){var r=document.createElement("script");return r.src=e,r.async=n,t&&(r.integrity=t),r.crossOrigin=c,document.body.appendChild(r),function(){document.body.removeChild(r)}}),[e,t,n,c])};var Q=function(){q("https://cdn.jsdelivr.net/npm/ionicons/dist/ionicons/ionicons.js");var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),a=Object(o.a)(s,2),i=a[0],u=a[1];return Object(x.jsx)("div",{className:"App",style:{marginTop:"30px"},children:n.length&&i.length?Object(x.jsx)(V,{apiKey:n,hfToken:i,setApiKey:c,setHfToken:u}):Object(x.jsx)(_,{setApiKey:c,setHfToken:u})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,201)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};a.a.createRoot(document.getElementById("root")).render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(Q,{})})),X()},24:function(e,t,n){}},[[198,1,2]]]);
//# sourceMappingURL=main.4b84fd41.chunk.js.map