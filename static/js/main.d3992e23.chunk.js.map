{"version":3,"sources":["functions/Utils.js","components/Loading.js","components/Chat.js","containers/MessageRoomPage.js","containers/AskKeyPage.js","functions/UseScript.js","App.js","reportWebVitals.js","index.js"],"names":["padTo2Digits","num","toString","padStart","formatDate","date","getMonth","getDate","join","getHours","getMinutes","getSeconds","validateApiKey","_x","_validateApiKey","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","apiKey","headers","jsonData","wrap","_context","prev","next","concat","messages","model","axios","post","sent","abrupt","t0","console","log","stop","Loading","_jsxs","className","children","_jsx","Chat","_ref","audio","transcription","translation","chat","_useState","useState","_useState2","_slicedToArray","transcriptionTime","setTranscriptionTime","_useState3","_useState4","translationTime","setTranslationTime","_useState5","_useState6","chatTime","setChatTime","useEffect","Date","style","margin","controls","src","_Fragment","MessageRoomPage","audios","setAudios","transcriptions","setTranscriptions","translations","setTranslations","_useState7","_useState8","chats","setChats","_useState9","_useState10","chatgptModel","urlForChatgpt","sendAudioRequest","_ref2","blob","formData","response","FormData","append","data","text","sendTranslationRequest","_x2","_sendTranslationRequest","_callee3","_translations","_context3","choices","message","content","sendChatRequest","_x3","_sendChatRequest","_callee4","i","_context4","length","push","sendRequests","_x4","_x5","_sendRequests","_callee5","audioUrl","audioBlob","_context5","_toConsumableArray","addAudioElement","_ref3","_callee2","_context2","URL","createObjectURL","_x6","marginTop","map","index","AudioRecorder","onRecordingComplete","disabled","onClick","name","fontSize","AskKeyPage","setApiKey","inputRef","useRef","errorRef","handleKeyDown","event","key","target","value","current","visibility","handleClick","type","onKeyDown","ref","useScript","url","integrity","async","undefined","crossOrigin","script","document","createElement","body","appendChild","removeChild","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","React","StrictMode"],"mappings":"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","file":"static/js/main.d3992e23.chunk.js","sourcesContent":["import axios from \"axios\";\n\nfunction padTo2Digits(num) {\n  return num.toString().padStart(2, '0');\n}\n\nfunction formatDate(date) {\n  return (\n    [\n    //   date.getFullYear(),\n      padTo2Digits(date.getMonth() + 1),\n      padTo2Digits(date.getDate()),\n    ].join('/') +\n    ' ' +\n    [\n      padTo2Digits(date.getHours()),\n      padTo2Digits(date.getMinutes()),\n      padTo2Digits(date.getSeconds()),\n    ].join(':')\n  );\n}\n\nasync function validateApiKey(apiKey){\n  const chatgptModel = \"gpt-3.5-turbo\";\n  const urlForChatgpt = \"https://api.openai.com/v1/chat/completions\";\n  try{\n      const headers = {\n          \"content-type\": \"application/json\",\n          \"Authorization\": `Bearer ${apiKey}`\n      };\n      const messages = [\n              {\"role\": \"user\", \"content\": \"Hello!\"}\n          ]\n      const jsonData = {messages: messages, model: chatgptModel}\n      const response = await axios.post(urlForChatgpt, jsonData, { headers:headers })\n      return true;\n  }\n  catch (error) {\n      console.log(error);\n      return false;\n  }\n}\n\nexport {formatDate, validateApiKey};","import '../App.css';\nimport React from \"react\";\n\nconst Loading = () => {\n\treturn (\n\t\t<div className=\"spinner\">\n\t\t\t<div className=\"bounce1\"></div>\n\t\t\t<div className=\"bounce2\"></div>\n\t\t\t<div className=\"bounce3\"></div>\n\t\t</div>\t\t\t\t\t\t\n\t)\n}\n\nexport default Loading;","import '../App.css';\nimport React from \"react\";\nimport { useEffect, useState } from 'react';\n\nimport {formatDate} from '../functions/Utils';\nimport Loading from './Loading';\n\nconst Chat = ({audio, transcription, translation, chat}) => {\n\tconst [transcriptionTime, setTranscriptionTime] = useState(\"\");\n\tconst [translationTime, setTranslationTime] = useState(\"\");\n\tconst [chatTime, setChatTime] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst date = new Date();\n\t\tsetTranscriptionTime(formatDate(date));\n\t}, [transcription]);\n\t\n\tuseEffect(() => {\n\t\tconst date = new Date();\n\t\tsetTranslationTime(formatDate(date));\n\t}, [translation])\n\n\tuseEffect(() => {\n\t\tconst date = new Date();\n\t\tsetChatTime(formatDate(date));\n\t}, [chat])\n\n\treturn (\n\t\t<div style={{margin:\"20px\"}}>\n\t\t\t{/* <div className='msg-inbox'>\n\t\t\t<div className='chats'> */}\n\t\t\t<div className='msg-page'>\n\t\t\t\t<div className=\"sent-chats\">\n\t\t\t\t\t<div className='sent-chats-msg'>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t// Set this to be null to avoid situation that return is empty\n\t\t\t\t\t\taudio !== null\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<audio controls=\"True\" src={audio}></audio>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Loading/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\ttranscription !== null\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p>{transcription}</p>\n\t\t\t\t\t\t\t\t<span className=\"chat-time\">{transcriptionTime}</span>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\taudio !== null\n\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\t<Loading/>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='sent-chats-img'>\n\t\t\t\t\t\t<img className='chats-img' src=\"old.png\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"received-chats\">\n\t\t\t\t\t{\n\t\t\t\t\ttranslation !== null\n\t\t\t\t\t\t?\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className='received-chats-img'>\n\t\t\t\t\t\t\t\t<img className='chats-img' src=\"chatgpt.png\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='received-msg'>\n\t\t\t\t\t\t\t\t<div className='received-msg-inbox'>\n\t\t\t\t\t\t\t\t\t<p>{translation}</p>\n\t\t\t\t\t\t\t\t\t<span className=\"chat-time\">{translationTime}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t: \n\t\t\t\t\t\t\ttranscription !== null\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<Loading/>\t\t\t\t\t\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"received-chats\">\n\t\t\t\t\t{\n\t\t\t\t\tchat !== null\n\t\t\t\t\t\t?\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className='received-chats-img'>\n\t\t\t\t\t\t\t\t<img className='chats-img' src=\"chatgpt.png\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='received-msg'>\n\t\t\t\t\t\t\t\t<div className='received-msg-inbox'>\n\t\t\t\t\t\t\t\t\t<p>{chat}</p>\n\t\t\t\t\t\t\t\t\t<span className=\"chat-time\">{chatTime}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t: \n\t\t\t\t\t\ttranslation !== null\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t<Loading/>\t\t\t\t\t\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t{/* </div>\n\t\t\t</div> */}\n\t\t\t</div>\n\t\t</div>\n\t)\n\n}\n\nexport default Chat;","import '../App.css';\nimport React from \"react\";\nimport { AudioRecorder } from 'react-audio-voice-recorder';\nimport axios from \"axios\";\nimport { useEffect, useState, useRef } from \"react\";\n\nimport Chat from '../components/Chat';\n\nconst MessageRoomPage = ({apiKey}) => {\n\n    const [audios, setAudios] = useState([]);\n    const [transcriptions, setTranscriptions] = useState([]);\n    const [translations, setTranslations] = useState([]);\n    const [chats, setChats] = useState([]);\n    const [audioClickAble, setAudioClickAble] = useState(false);\n\n    const whisperModel = \"whisper-1\";\n    const chatgptModel = \"gpt-3.5-turbo\";\n    const urlForWhisper = \"https://api.openai.com/v1/audio/transcriptions\";\n    const urlForChatgpt = \"https://api.openai.com/v1/chat/completions\";\n\n    const sendAudioRequest = async function (blob) {      \n        try{\n            const headers = {\n                \"content-type\":  \"multipart/form-data\",\n                \"Authorization\": `Bearer ${apiKey}`\n            //   \"Authorization\": `Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`\n            };    \n            const formData = new FormData();\n            formData.append(\"file\", blob , \"audio.mp3\")\n            formData.append(\"model\", whisperModel)\n            \n            // TODO: header quote?\n            const response = await axios.post(urlForWhisper, formData, { \"headers\":headers })\n            const transcription = response.data.text;    \n            return transcription\n        }\n        catch (error){\n            console.log(error);\n        }\n    }\n\n    async function sendTranslationRequest (transcription) {\n        try{\n            const headers = {\n                \"content-type\": \"application/json\",\n                \"Authorization\": `Bearer ${apiKey}`\n            };\n            const messages = [\n                    {\"role\": \"system\", \"content\": \"Translate from English to Traditional Chinese\"},\n                    {\"role\": \"user\", \"content\": transcription}\n                ]\n            const jsonData = {messages: messages, model: chatgptModel}\n            // TODO: header quote?\n            const response = await axios.post(urlForChatgpt, jsonData, { headers:headers })\n            console.log(response)\n            const translations = response.data.choices[0].message.content\n            return translations;\n        }\n        catch (error) {\n            console.log(error);\n        }\n    }\n\n    async function sendChatRequest(translation) {\n        try {\n            const headers = {\n                \"content-type\": \"application/json\",\n                \"Authorization\": `Bearer ${apiKey}`\n            };\n            const messages = [\n                    {\"role\": \"system\", \"content\": \"You are a helpful assistant.\"},\n                ]\n\n            console.log(translations)\n            // Multi-turn chats\n            // FIXME: setState() is async, so the translations here are not updated,\n            //        so constraint should be translations.length \n            //        to including the last translation\n            for (let i = 0; i < translations.length; i ++){\n                messages.push({\"role\": \"user\", \"content\": translations[i]});\n                messages.push({\"role\": \"assistant\", \"content\": chats[i]});\n            }\n            messages.push({\"role\": \"user\", \"content\": translation});\n\n            console.log(messages)\n            const jsonData = {messages: messages, model: chatgptModel}\n            const response = await axios.post(urlForChatgpt, jsonData, {headers: headers} )\n            console.log(response)\n            const chat = response.data.choices[0].message.content\n            return chat;\n        }\n        catch (error){\n            console.log(error)\n        }\n    }\n\n    async function sendRequests (audioUrl, audioBlob){\n        const transcription = await sendAudioRequest(audioBlob);\n        setTranscriptions([...transcriptions, transcription]);\n\n        const translation = await sendTranslationRequest(transcription);\n        setTranslations([...translations, translation])\n\n        const chat = await sendChatRequest(translation);\n        setChats([...chats, chat])\n    }\n\n    const addAudioElement = async function (audioBlob) {\n        const audioUrl = URL.createObjectURL(audioBlob);\n        setAudios([...audios, audioUrl]);\n\n        // enforce the length of three lists are equal\n        setTranscriptions([...transcriptions, null]);\n        setTranslations([...translations, null]);\n        setChats([...chats, null]);\n\n        await sendRequests(audioUrl, audioBlob);\n    };\n\n    const resetConversation = () => {\n        setAudios([]);\n        setTranscriptions([]);\n        setTranslations([]);\n        setChats([]);\n    }\n\n    return (\n        <div className=\"App\" style={{marginTop:\"30px\"}}>\n            <div className='msg-container'>\n              {\n              audios.map((audio, index)=> (\n                <Chat key={index} audio={audios[index]} transcription={transcriptions[index]} \n                        translation={translations[index]} chat={chats[index]}/>\n              ))\n              }\n            </div>\n            <div className='bottom-line'></div>\n            <div className='bottom-line-button'>\n                <AudioRecorder onRecordingComplete={addAudioElement}/>\n                <button className='circle-button' disabled={false}  onClick={resetConversation}>\n                    <ion-icon name=\"trash\" style={{fontSize: \"17px\"}}></ion-icon>\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default MessageRoomPage;\n","import '../App.css';\nimport React from \"react\";\nimport { useRef } from \"react\";\n\nimport { validateApiKey } from '../functions/Utils';\n\nconst AskKeyPage = ({setApiKey}) => {\n\n    const inputRef = useRef();\n    const errorRef = useRef();\n    const handleKeyDown = async (event) => {\n        if (event.key === \"Enter\"){\n            try{\n                const apiKey = event.target.value;\n                const test = await validateApiKey(apiKey);\n                if (test == true)\n                    setApiKey(event.target.value)\n                else \n                    errorRef.current.style.visibility = \"visible\";\n            }\n            catch (error){\n                errorRef.current.style.visibility = \"visible\";\n                console.log(error)\n            }\n        }\n    }\n    const handleClick = async (event) => {\n        try{\n            const apiKey = inputRef.current.value\n            const test = await validateApiKey(apiKey) \n            if (test === true)\n                setApiKey(inputRef.current.value)\n            else \n                errorRef.current.style.visibility = \"visible\";\n        }\n        catch (error) {\n            errorRef.current.style.visibility = \"visible\";\n            console.log(error)\n        }\n    }\n\n    return (\n        <div className=\"App ask-key-container\" >\n            <h2>Whisper & ChatGPT 術前問診系統</h2>\n            <span>\n                Api Key : <input type=\"text\" onKeyDown={handleKeyDown} ref={inputRef}/>\n            </span>\n            <button onClick={handleClick}>確認</button>\n            <div className=\"error\" ref={errorRef} style={{\"visibility\": \"hidden\"}}>\n                <h3 style={{\"color\":\"red\"}}>Error!</h3>\n                <p style={{\"color\":\"red\"}}>Please ensure that a correct api key is provided</p>\n            </div> \n        </div>\n    );\n}\n\nexport default AskKeyPage;\n","import { useEffect } from \"react\"\n\nconst useScript = (url, integrity, async = true, crossOrigin = \"anonymous\") => {\n  useEffect(() => {\n    const script = document.createElement(\"script\")\n\n    script.src = url\n\n    script.async = async\n\n    if (integrity) {\n      script.integrity = integrity\n    }\n\n    script.crossOrigin = crossOrigin\n\n    document.body.appendChild(script)\n\n    return () => {\n      document.body.removeChild(script)\n    }\n  }, [url, integrity, async, crossOrigin])\n}\n\nexport default useScript","import './App.css';\nimport React from \"react\";\n// import dotenv_defaults from \"dotenv-defaults\";\nimport { useEffect, useState } from \"react\";\n\nimport MessageRoomPage from \"./containers/MessageRoomPage\"\nimport AskKeyPage from './containers/AskKeyPage';\nimport useScript from './functions/UseScript';\n// dotenv_defaults.config();\n\nfunction App() {\n\n    // useScript(\"https://cdn.jsdelivr.net/npm/ionicons/dist/ionicons/ionicons.esm.js\")\n    useScript(\"https://cdn.jsdelivr.net/npm/ionicons/dist/ionicons/ionicons.js\")\n    const [apiKey, setApiKey] = useState(\"\");\n\n    return (\n        <div className=\"App\" style={{marginTop:\"30px\"}}>\n            { apiKey.length\n                ?\n                <MessageRoomPage apiKey= {apiKey}/>\n                :\n                <AskKeyPage setApiKey = {setApiKey}/>\n            }\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}